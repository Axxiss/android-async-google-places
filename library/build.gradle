// Project Info
description = 'Android lib for accessing Google Places API asynchronously'

apply plugin: 'android-library'
apply plugin: 'maven'
apply plugin: 'maven-publish'
apply plugin: 'signing'

//This must be on gradle.properties
sonatypeUser = 'user'
sonatypePass = 'pass'

android {
    compileSdkVersion 19
    buildToolsVersion "19.0.1"

    defaultConfig {
        versionCode 1
        versionName version
        minSdkVersion 7
        targetSdkVersion 19
    }
}


dependencies {
    compile 'junit:junit:4.11'
    compile 'com.google.code.gson:gson:2.2.4'
    compile 'com.loopj.android:android-async-http:1.4.4@aar'
}


def isSnapshot = version.contains("SNAPSHOT")

def mavenCentralRepo = isSnapshot ?
        'https://oss.sonatype.org/content/repositories/snapshots/' :
        'https://oss.sonatype.org/service/local/staging/deploy/maven2';


uploadArchives {
    repositories {
        mavenDeployer {
            repository url: 'file://' + new File(System.getProperty('user.home'), '.m2/repository').absolutePath
        }
    }
}
task install(dependsOn: uploadArchives)

/**
 * Artifacts
 */
//
//task javadocJar(type: Jar, dependsOn: javadoc) {
//    classifier = 'javadoc'
//    from javadoc.destinationDir
//}
//
//task sourceJar(type: Jar) {
//    classifier = 'sources'
//    from sourceSets.main.allSource
//}
//
//
//artifacts {
//    archives jar
//    archives sourceJar
//    archives javadocJar
//}
//
//
//signing {
//    sign configurations.archives
//}
//
//uploadArchives {
//    repositories.mavenDeployer {
//        configuration = configurations.archives
//
////        beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }
//
//        repository(url: mavenCentralRepo) {
//            authentication(userName: sonatypeUser, password: sonatypePass)
//        }
//
//
//        pom.project {
//            name 'Android Async Google Places API'
//            description 'Android lib for accessing Google Places API asynchronously'
//            url 'https://github.com/Axxiss/android-async-google-places'
//            inceptionYear '2013'
//
//            scm {
//                url 'https://github.com/Axxiss/android-async-google-places'
//                connection 'scm:git:git://github.com/Axxiss/android-async-google-places.git'
//                developerConnection 'scm:git:ssh:git@github.com:Axxiss/android-async-google-places.git'
//            }
//
//            licenses {
//                license {
//                    name 'The Apache Software License, Version 2.0'
//                    url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
//                    distribution 'repo'
//                }
//            }
//
//            developers {
//                developer {
//                    id 'Axxiss'
//                    name 'Alexis Mas'
//                    email 'alexismas@about.me'
//                }
//            }
//        }
//    }
//}

